[CLI] Applying resource limits (75% system RAM)...
[ResourceLimiter] Applying resource limits...
  System: 32.0 GB RAM, 12 CPUs
[ResourceLimiter] ⚠️  Could not set memory limit: current limit exceeds maximum limit
[ResourceLimiter] ✓ Resource limits applied
[CLI] Using unified solver
[CLI] ======================================================================
[CLI] OUTCOME-BASED ROSTERING MODE
[CLI] ======================================================================
[CLI] Skipping ICPMP preprocessing (outcomeBased mode)
[CLI] Using all 1 employees with OU-based rotation offsets

[CLI] ╔════════════════════════════════════════════════════════════
[CLI] ║ DEBUG: RAW INPUT EMPLOYEES - BEFORE load_input()
[CLI] ╠════════════════════════════════════════════════════════════
[CLI] ║ Total raw employees: 1
[CLI] ║ First 3 raw employees:
[CLI] ║   00095865: rotationOffset=0, ouId=ATSU T1 LSU A1
[CLI] ╚════════════════════════════════════════════════════════════
[CLI] Loading input into solver context...
[data_loader] Rank filtering: 1 → 1 employees
[CLI] ╔════════════════════════════════════════════════════════════
[CLI] ║ DEBUG: ROTATION OFFSET TRACKING - BEFORE LOGIC
[CLI] ╠════════════════════════════════════════════════════════════
[CLI] ║ Total employees in ctx: 1
[CLI] ║ OU offset map: {'ATSU T1 LSU A1': 0}
[CLI] ║ Sample employees (first 3):
[CLI] ║   00095865: rotationOffset=0, ouId=ATSU T1 LSU A1
[CLI] ╚════════════════════════════════════════════════════════════
[CLI] ╔════════════════════════════════════════════════════════════
[CLI] ║ SINGLE OU WITH INDIVIDUAL OFFSETS DETECTED
[CLI] ╠════════════════════════════════════════════════════════════
[CLI] ║ Preserving 1 individual offsets
[CLI] ║ Sample preserved offsets:
[CLI] ║   00095865: offset=0
[CLI] ╚════════════════════════════════════════════════════════════
[CLI] ✓ Target staffing: 100% of 1 filtered employees = 1 minimum
[CLI] ╔════════════════════════════════════════════════════════════
[CLI] ║ DEBUG: DETECTION LOGIC - CHECKING FOR MODE SWITCH
[CLI] ╠════════════════════════════════════════════════════════════
[CLI] ║ eligible_employees count: 1
[CLI] ║ employee_offsets: [0]
[CLI] ║ unique_offsets: {0}
[CLI] ║ unique_ous: {'ATSU T1 LSU A1'}
[CLI] ║ has_individual_offsets: False
[CLI] ║ is_single_ou: True
[CLI] ║ Sample eligible employees:
[CLI] ║   00095865: offset=0, ouId=ATSU T1 LSU A1
[CLI] ╚════════════════════════════════════════════════════════════
[CLI] Template mode explicitly set: 'cpsat' → forcing template-based rostering
[CLI] ======================================================================
[CLI] TEMPLATE-BASED OUTCOME ROSTERING
[CLI] ======================================================================
[CLI] Mode: cpsat (constraint-validated template generation)
[CLI] Method: Generate template per OU → validate constraints → replicate
[CLI] Constraints: C1-C17 (core MOM regulatory constraints)


================================================================================
✓ CP-SAT TEMPLATE GENERATOR IS RUNNING (NOT FALLBACK TO INCREMENTAL)
================================================================================

[DEBUG] Processing OU: ATSU T1 LSU A1, Employees: 1
[DEBUG] Template employee: 00095865, Offset: 0
[C2 DEBUG] Applying smart weekly hours constraint (pattern length = 7)
[C2 DEBUG] Logic: Only first 5 work days per week count toward 44h cap
[C2 DEBUG] Days 6-7 in calendar week get rest day pay (0h normal)
[C2 DEBUG] Week 2026-01-01: Up to 4 work days, first 4 count (max 35.2h normal)
[C2 DEBUG] Week 2026-01-05: Up to 7 work days, first 5 count (max 44.0h normal)
[C2 DEBUG] Week 2026-01-12: Up to 7 work days, first 5 count (max 44.0h normal)
[C2 DEBUG] Week 2026-01-19: Up to 7 work days, first 5 count (max 44.0h normal)
[C2 DEBUG] Week 2026-01-26: Up to 6 work days, first 5 count (max 44.0h normal)
[C5 DEBUG] Pattern length: 7, Pattern: ['D', 'D', 'D', 'D', 'D', 'D', 'D']
[C5 DEBUG] Max consecutive days: 8, Is APGD-D10: True
[C5 DEBUG] APGD-D10 with 7 consecutive work pattern and 8-day approval
[C5 DEBUG] Using 8-day windows to allow 8 consecutive days
[CLI] ✓ Template roster generated in 0.02s
[CLI] Status: FEASIBLE
[CLI] Assignments: 28 assigned, 3 unassigned
[CLI] Employees: 1/1

[CLI] Building output JSON...
[CLI] ✓ Total time: 0.03s (ICPMP: 0.00s, Solve: 0.02s)
✓ Solve status: FEASIBLE → wrote output/test_63be46b5_fixed.json
  Assignments: 31
  Hard score: 3
  Soft score: 0
  Overall score: 3
